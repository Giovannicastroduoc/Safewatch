<ion-header [translucent]="true">
  <ion-toolbar class="header-toolbar">
    <ion-title class="header-title">SafeWatch</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="login-container" [fullscreen]="true">
  <!--fondo grad-->
  <div class="background-wrapper">
    <div class="background-pattern"></div>
    <div class="background-overlay"></div>
  </div>

 
  <div class="login-content">
    <!--tarj login-->
    <div class="login-card" #loginFormElement>
      <!--logo -->
      <div class="brand-section">
        <div class="logo-wrapper">
          <div class="logo-circle">
            <ion-icon name="shield-checkmark" class="logo-icon"></ion-icon>
          </div>
          <div class="pulse-dot"></div>
        </div>
        <h1 class="app-title">SafeWatch</h1>
        <p class="app-subtitle">Sistema de Seguridad Integral</p>
        <div class="welcome-message">
          <p>Bienvenido de vuelta</p>
        </div>
      </div>

      <!--form -->
      <form [formGroup]="loginForm" (ngSubmit)="iniciarSesion()" class="login-form">
        <!--camp usuario-->
        <div class="input-group">
          <div class="input-wrapper">
            <ion-icon name="person-circle-outline" class="input-icon"></ion-icon>
            <ion-item lines="none" class="custom-input-item">
              <ion-input
                formControlName="usuario"
                type="text"
                placeholder="Nombre de usuario"
                class="custom-input"
                [class.has-value]="loginForm.get('usuario')?.value"
                (ionFocus)="onInputFocus('usuario')"
                (ionBlur)="onInputBlur('usuario')">
              </ion-input>
            </ion-item>
            <div class="input-line" [class.active]="focusedField === 'usuario'"></div>
          </div>
          <div class="error-message" *ngIf="loginForm.get('usuario')?.invalid && loginForm.get('usuario')?.touched">
            <ion-icon name="alert-circle"></ion-icon>
            Usuario debe tener al menos 3 caracteres
          </div>
        </div>

        <!--camp contraseña-->
        <div class="input-group">
          <div class="input-wrapper">
            <ion-icon name="lock-closed-outline" class="input-icon"></ion-icon>
            <ion-item lines="none" class="custom-input-item">
              <ion-input
                formControlName="password"
                type="password"
                placeholder="Contraseña"
                class="custom-input"
                [class.has-value]="loginForm.get('password')?.value"
                (ionFocus)="onInputFocus('password')"
                (ionBlur)="onInputBlur('password')">
              </ion-input>
            </ion-item>
            <div class="input-line" [class.active]="focusedField === 'password'"></div>
          </div>
          <div class="error-message" *ngIf="loginForm.get('password')?.invalid && loginForm.get('password')?.touched">
            <ion-icon name="alert-circle"></ion-icon>
            Contraseña debe tener al menos 4 caracteres
          </div>
        </div>

        <!--recordar contraseña-->
        <div class="remember-forgot">
          <ion-item lines="none" class="remember-item">
            <ion-checkbox slot="start" color="primary"></ion-checkbox>
            <ion-label>Recordar sesión</ion-label>
          </ion-item>
          <a href="#" class="forgot-link">¿Olvidó su contraseña?</a>
        </div>

        <!--boton logun-->
        <ion-button 
          expand="block" 
          type="submit" 
          [disabled]="!loginForm.valid"
          class="login-button"
          [class.loading]="isLoading">
          <div class="button-content">
            <ion-icon name="log-in-outline" class="button-icon" *ngIf="!isLoading"></ion-icon>
            <ion-spinner name="crescent" *ngIf="isLoading"></ion-spinner>
            <span class="button-text">
              {{ isLoading ? 'Ingresando...' : 'Ingresar al Sistema' }}
            </span>
          </div>
          <div class="button-shine"></div>
        </ion-button>
      </form>

      <!--inf ad-->
      <div class="login-info">
        <div class="info-item">
          <ion-icon name="shield-checkmark" color="success"></ion-icon>
          <span>Sistema 100% seguro</span>
        </div>
        <div class="info-item">
          <ion-icon name="time-outline" color="medium"></ion-icon>
          <span>Sesión automática</span>
        </div>
      </div>

      <!--footer-->
      <div class="login-footer">
        <p class="footer-text">¿Problemas para ingresar?</p>
        <a href="#" class="support-link">
          <ion-icon name="headset-outline"></ion-icon>
          Contactar soporte técnico
        </a>
      </div>
    </div>
  </div>
</ion-content>